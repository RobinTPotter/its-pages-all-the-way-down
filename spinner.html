<html>
	<body>
		<svg viewBox="-25 -25 50 60">
			<circle style="stroke:blue;fill:none" r="22" x="0" y="0" />
			<g id="xf">
			<rect style="stroke:black;fill:red" x="-2" y="-2" width="4" height="20" transform="rotate(20)" />
			</g>
			<g id="opts"></g>
		</svg>
		<div id="nob"></div>
		<script>
			var rr;
			var vv;
			var lag;
			var NS = 'http://www.w3.org/2000/svg'
			var options = ((new URLSearchParams(window.location.search)).get("options") || "red,green,blue").split(",");

			var op=document.getElementById("opts")
			for (var oo=0; oo<options.length; oo++) {
			
/*
<path id="P" pathLength="100" d="M0 25h50" stroke="blue"/>
  <text>
    <textPath href="#P" 
              startoffset="100" text-anchor="end" 
              dominant-baseline="middle"
              fill="green" font-size="14px">Right aligned</textPath>
  </text>
*/



				var gt = document.createElementNS(NS,'g')
				var ln = document.createElementNS(NS,'path')
				ln.setAttribute("id", `P${oo}`)
				ln.setAttribute("pathLength", "10")
				ln.setAttribute("d", "M0 0h20")
				ln.setAttribute("style", "stroke:blue")


				var text = document.createElementNS(NS,'text')
				var textP = document.createElementNS(NS,'textPath')
				textP.setAttribute('href',`#P${oo}`)
				textP.setAttribute("startoffset", "10")
				textP.setAttribute('dominant-baseline','middle')
				textP.setAttribute('text-anchor','end')
				textP.setAttribute('style','font-family:sans-serif;font-size:5px;stroke-width:0.75px;stroke:black')
				textP.innerHTML = options[oo]
				text.appendChild(textP)
				gt.appendChild(ln)
				gt.appendChild(text)
				gt.setAttribute("transform", `rotate(${360*oo/options.length})`);
				op.appendChild(gt)






			}


			function rot(r) {
				var p=document.getElementById("xf")
				p.setAttribute("transform", `rotate(${r})`)
				var p2=document.getElementById("nob")
				p2.text = r
			}

			function go() {
				rr = 0
				lag = Math.random() * 0.03 + 0.95
				vv= 30 + 5 * Math.random()
			}

			function tick() {
		//		alert(rr)
				rot(rr)
				rr = rr + vv
				vv = vv * lag
				if (vv<0.01) vv = 0
				if (vv>0) setTimeout(tick, 20)
			}
			
			go()
			tick()

		</script>
	</body>
</html>
